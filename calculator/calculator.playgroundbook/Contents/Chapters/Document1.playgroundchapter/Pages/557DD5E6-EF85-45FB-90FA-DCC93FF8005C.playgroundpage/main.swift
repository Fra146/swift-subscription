//#-hidden-code
//
//  main.swift
//
//  Copyright © 2016-2020 Apple Inc. All rights reserved.
//
//#-code-completion(everything, hide)
//#-code-completion(keyword, show, for, func, if, let, var, while, in)
//#-code-completion(literal, show, literal, array, boolean, color, dictionary, image, string, integer, nil)
//#-code-completion(snippet, show, repeat, switch, protocol, enum, struct, class, return)
//#-code-completion(currentmodule, show)
//#-code-completion(module, show, MyFiles, SpriteKit, Swift, UIKit)
//#-code-completion(identifier, show, (hue:saturation:brightness:alpha:), (image:), (image:columns:rows:), (image:columns:rows:isDynamic:name:), (image:name:), (red:green:blue:alpha:), (text:color:), (text:color:font:size:name:), (type:), (type:text:name:), (width:height:), (x:y:), AcademyEngravedLET, AmericanTypewriter, AppleSDGothicNeo, Arial, ArialRoundedMTBold, Avenir, AvenirNext, AvenirNextCondensed, Baskerville, Bodoni72, Bounce1, Bounce2, Bounce3, BradleyHand, Button, ButtonType, ChalkDuster, ChalkboardSE, Cochin, Color, Copperplate, Courier, CourierNew, Didot, Font, Futura, Georgia, GillSans, Graphic, Helvetica, HelveticaNeue, HiraginoMinchoProN, HiraginoSans, Impact, Joint, Label, MarkerFelt, Menlo, Noteworthy, Optima, Palatino, Papyrus, PartyLET, PingFangSC, PingFangTC, Point, SavoyeLET, Scene, Size, SnellRoundhand, Sprite, String, Superclarendon, SystemBoldItalic, SystemFontBlack, SystemFontBold, SystemFontHeavy, SystemFontLight, SystemFontMedium, SystemFontRegular, SystemFontSemibold, SystemFontThin, SystemFontUltraLight, SystemHeavyItalic, SystemItalic, Thonburi, TimesNewRoman, Touch, TrebuchetMS, Verdana, Zapfino, add(joint:), allowsRotation, allowsTouchInteraction, alpha, angle, angularDamping, angularVelocity, applyForce(x:y:duration:), applyImpulse(x:y:), arabic, area, aspectFitMaximum, aspectFitMinimum, audioPlayAction(fileNamed:), backgroundColor, backgroundColors, backgroundImage, beam, beep, blip, boing1, boing2, boing3, boop1, boop2, boop3, bottom, bounciness, buttonPress1, buttonType, capturesTouches, center, chinese, chineseHongKong, chineseTaiwan, circle(radius:color:), circle(radius:color:colors:), circlePoints(radius:count:), clang, clear(), clunk, collisionNotificationCategories, constrained, containing:, contentPresentation, crash, crystal, customShape(path:color:), customShape(path:color:colors:), czech, danish, defeat1, density, distance(from:), drag, drop, dutch, echobird, electricBeep1, electricBeep2, electricBeep3, electricBeep4, electricBeepFader, englishAustralia, englishIreland, englishSouthAfrica, englishUK, englishUS, explosionShort, fadeAlpha(by:duration:), fadeAlpha(to:duration:), fadeIn(after:), fadeOut(after:), finnish, firstTouch, fit(within:), fixed(from:to:at:), font, fontSize, force, frenchCanada, frenchFrance, friction, friendlyPassage, german, getGraphics(at:in:), getGraphics(named:), getGraphicsWithName(containing:), graphics, greek, green, gridPoints(size:count:angle:), hasCollisionBorder, hebrew, height, helicopterWhoosh, hindi, horizontalGravity, hue:saturation:brightness:alpha:, hungarian, image, image(text:), image:, image:columns:rows:, image:columns:rows:isDynamic:name:, image:name:, indonesian, interactionCategory, isAffectedByGravity, isDynamic, isGridVisible, isResting, italian, japanese, joints, korean, laser1, laser2, laser3, left, limit(from:at:to:at:), line(length:thickness:color:), line(length:thickness:color:colors:), line(start:end:thickness:color:), line(start:end:thickness:color:colors:), linearDamping, location, machineGreeting1, machineGreeting2, machineGreeting3, mass, miss, move(to:duration:), moveBy(x:y:duration:), name, node, norwegian, onCollisionHandler, onGraphicTouchedHandler, onTouchMovedHandler, orbit(x:y:period:), orbitAction(x:y:period:), overlaid(with:offsetBy:), physicsBody, pi, pin(from:to:around:), pinned, place(_:), place(_:at:), place(_:at:anchoredTo:), place(at:), playSound(_:volume:), pleasantDing1, pleasantDing2, pleasantDing3, polish, polygon(radius:sides:color:), polygon(radius:sides:color:colors:), pop, pop1, pop2, portugueseBrazil, portuguesePortugal, position, powerUp1, powerUp2, powerUp3, powerUp4, powerup, pulsate(), pulsate(period:count:), puzzleJam, radiant, randomCharacter, randomIndex, randomItem, rectangle(width:height:cornerRadius:color:), rectangle(width:height:cornerRadius:color:colors:), red, red:green:blue:alpha:, remove(), remove(_:), remove(joint:), removeAction(forKey:), removeAllActions(), removeGraphics(named:), removeHandler(forInteraction:), removeJoints(named:), restituion, retroBass, retroCollide1, retroCollide2, retroCollide3, retroCollide4, retroCollide5, retroJump1, retroJump2, retroPowerUp1, retroPowerUp2, retroTwang1, retroTwang2, right, romanian, rotate(byAngle:duration:), rotate(toAngle:duration:), rotation, rotationalDrag, run(_:), run(_:key:), runAnimation(_:timePerFrame:numberOfTimes:), russian, scale, scale(by:duration:), scale(to:duration:), scaleX(by:y:duration:), scaleX(to:y:duration:), scaledImage(size:), setHandler(for:handler:), setOnCollisionHandler(_:), setOnTouchHandler(_:), setOnTouchMovedHandler(_:), setTintColor(_:blend:), setVelocity(x:y:), shake(duration:), shuffle(), shuffled(), size, sliding(from:to:at:axis:), slovak, somethingBad1, somethingBad2, somethingBad3, somethingBad4, somethingGood1, somethingGood2, somethingGood3, somethingGood4, somethingGood5, somethingGood6, somethingGood7, sonar, spanishMexico, spanishSpain, speak(text:), speak(text:withAccent:rate:pitch:completion:), spin(period:), splat, spring(from:at:to:at:), spring1, spring2, spring3, spring4, spriteA, spriteB, squarePoints(width:count:), squeak, star(radius:points:sharpness:color:), star(radius:points:sharpness:color:colors:), strangeWobble, strokeColor, strokeWidth, swedish, text, text:, text:color:, text:color:font:size:name:, textColor, thai, thud, tick, top, touch, touchCancelled, touchHandler, touchUp, tubeHit1, tubeHit2, tubeHit3, turkish, type:, type:text:name:, velocity, verticalGravity, victory1, victory2, victory3, victory4, wall, warble, warp, width, width:height:, x, x:y:, x:y:duration:, xScale, y, yScale, zap)
//#-code-completion(description, hide, "(hue: CGFloat, saturation: CGFloat, brightness: CGFloat, alpha: CGFloat)", "(x: CGFloat, y: CGFloat)", "(x: Float, y: Float)", "(width: CGFloat, height: CGFloat)", "(width: Float, height: Float)", "(point: CGPoint)", "(from: Decoder) throws", "(music: Music, volume: Int)", "playMusic(music: Music, volume: Int)", "(sound: Sound, volume: Int)", "playSound(sound: Sound, volume: Int)", "from(playgroundValue: PlaygroundValue)", "(sound: Sound)", "(sound: Sound, loopFireHandler: (() -> Void)?)")
//#-end-hidden-code
// Function from setUpLiveView.swift
setUpLiveView()

// Arrays containing contractions
var αι = ["α+αι"]
var αυ = ["α+αυ"]
var ει = ["ε+ει", "ε+ε"]
var ῃ = ["ε+ῃ", "ε+αι", "ε+ᾳ", "η+αι"]
var οι = ["ο+οι", "ο+ῃ", "ε+οι"]
var ῳ = ["ο+ῳ", "ω+αι", "ω+ῃ", "α+οι", "α+ῳ", "ε+ῳ", "η+οι", "ο+αι", "ο+ᾳ"]
var οιου = ["ο+ει"]
var ῳω = ["ω+ει"]
var ω = ["ο+α", "ο+η","ω+α","ω+ε","ω+η","α+ο","η+ο","α+ω","ε+ω","η+ω", "ο+ω", "ω+ο", "ω+ω", "ω+ου", "α+ου"]
let ου = ["ο+ε","ε+ο", "ο+ο", "ο+ου", "ε+ου"]
let η = ["ε+α", "η+α","ε+η","η+ε","η+η"]
let ᾱ = ["α+ε", "α+η", "α+α", "α+ει", "α+ῃ"]
let ῑ = ["ι+ι"]
let ῡ = ["υ+υ"]

// Graphical elements

// Background
let background = Graphic.rectangle(width: 3000, height: 3000, cornerRadius: 0, color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))

// Buttons
let alfabut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color:#colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let epsilonbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let etabut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let omegabut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let upsilonbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let omicronbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let alfabuts = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let etabuts = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let omegabuts = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let clearbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0))
let plusbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0))
let equalbut = Graphic.rectangle(width: 150, height: 150, cornerRadius: 0, color: #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0))

// Showing background
scene.place(background, at: Point.zero)

// Showing buttons
scene.place(upsilonbut, at: Point(x: 0, y: 45))
scene.place(etabuts, at: Point(x: 0, y: -105))
scene.place(plusbut, at: Point(x: 0, y: -255))
scene.place(epsilonbut, at: Point(x: 0, y: 195))

scene.place(alfabut, at: Point(x: -150, y: 195))
scene.place(omegabut, at: Point(x: -150, y: 45))
scene.place(alfabuts, at: Point(x: -150, y: -105))
scene.place(clearbut, at: Point(x: -150, y: -255))

scene.place(etabut, at: Point(x: 150, y: 195))
scene.place(omicronbut, at: Point(x: 150, y: 45))
scene.place(omegabuts, at: Point(x: 150, y: -105))
scene.place(equalbut, at: Point(x: 150, y: -255))

// Minor buttons and labels
let newclearbut = Graphic.rectangle(width: 50, height: 50, cornerRadius: 0, color: #colorLiteral(red: -0.3319960832595825, green: 0.8575384020805359, blue: 0.8285561800003052, alpha: 1.0))
let newclearbutlabel = Label(text: "✕", color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))
let polclearbut = Graphic.rectangle(width: 50, height: 45, cornerRadius: 0, color: #colorLiteral(red: -0.3319960832595825, green: 0.8575384020805359, blue: 0.8285561800003052, alpha: 1.0))
let polclearbutlabel = Label(text: "←", color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))
let polbut = Graphic.rectangle(width: 150+150/2, height: 50, cornerRadius: 0, color: #colorLiteral(red: 0.0, green: 0.8588235378265381, blue: 0.8274509906768799, alpha: 1.0))
let polbut2 = Graphic.rectangle(width: 150+150/2, height: 50, cornerRadius: 0, color: #colorLiteral(red: 0.0, green: 0.8588235378265381, blue: 0.8274509906768799, alpha: 1.0))
let polbut3 = Graphic.rectangle(width: 150+150/2, height: 50, cornerRadius: 0, color: #colorLiteral(red: 0.0, green: 0.8588235378265381, blue: 0.8274509906768799, alpha: 1.0))
let polbutlabel = Label(text: "Restart Pol.", color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))
let polbutlabel2 = Label(text: "Generate Pol.", color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))
let polbutlabel3 = Label(text: "Calculate Pol.", color: #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0))
let pollabel = Label(text: "Polynomial", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Futura, size: 30)
let label = Label(text: "Contractions", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Futura, size: 35)
let math = Label(text: "Math", color: #colorLiteral(red: 1.0000001192092896, green: 1.0000001192092896, blue: 1.0000001192092896, alpha: 1.0), font: .Futura, size: 20)
let greek = Label(text: "Greek", color: #colorLiteral(red: 1.0000001192092896, green: 1.0000001192092896, blue: 1.0000001192092896, alpha: 1.0), font: .Futura, size: 20)
let alfa = Label(text: "α", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let epsilon = Label(text: "ε", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let eta = Label(text: "η", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let omega = Label(text: "ω", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let upsilon = Label(text: "υ", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let omicron = Label(text: "ο", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let alfas = Label(text: "ᾳ", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let etas = Label(text: "ῃ", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let omegas = Label(text: "ῳ", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let clear = Label(text: "ι", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let plus = Label(text: "+", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)
let equal = Label(text: "=", color: #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0), font: .Arial, size: 70)

// Showing minor buttons and labels
scene.place(math, at: Point(x: -195, y: 340))
scene.place(greek, at: Point(x: -195, y: 300))
scene.place(polclearbut, at: Point(x: 200, y: 340))
scene.place(polclearbutlabel, at: Point(x: 200, y: 340))
scene.place(newclearbut, at: Point(x: 200, y: 295))
scene.place(newclearbutlabel, at: Point(x: 200, y: 295))
scene.place(polbut, at: Point(x: -112.5, y: -355))
scene.place(polbut2, at: Point(x: 112.5, y: -355))
scene.place(polbut3, at: Point(x: 0, y: -405))
scene.place(polbutlabel, at: Point(x: -112.5, y: -355))
scene.place(polbutlabel2, at: Point(x: 112.5, y: -355))
scene.place(polbutlabel3, at: Point(x: 0, y: -405))
scene.place(pollabel, at: Point(x: 0, y: 340))
scene.place(label, at: Point(x: 0, y: 300))
scene.place(alfa, at: Point(x: -150, y: 195))
scene.place(epsilon, at: Point(x: 0, y: 195))
scene.place(eta, at: Point(x: 150, y: 195))
scene.place(omega, at: Point(x: -150, y: 45))
scene.place(upsilon, at: Point(x: 0, y: 45))
scene.place(omicron, at: Point(x: 150, y: 45))
scene.place(alfas, at: Point(x: -150, y: -105))
scene.place(etas, at: Point(x: 0, y: -105))
scene.place(omegas, at: Point(x: 150, y: -105))
scene.place(clear, at: Point(x: -150, y: -255))
scene.place(plus, at: Point(x: 0, y: -255))
scene.place(equal, at: Point(x: 150, y: -255))

// Contractions' array
var i = [String]()
// Polynomial's array
var p = [String]()

// Function addWord, called on every letter or plus button press
func addWord(word: String) {
    i.append(word)
    label.text = i.joined(separator: "")
    if label.text.count > 15 {
        label.text = ""
        i.removeAll()
    }
}

// Function show. Shows the result on the label
func show(word: String, word2: String) {
    i.removeAll()
    label.text = label.text + "=" + word
    if p.count == 0 {
        p.append("(" + word2 + ")")
    }
    else {
        p.append("+(" + word2 + ")")
    }
}

// Function execute, called by equal button press
func execute(a: String) -> String {
    if αι.contains(a) {
        return("αι")
    }
    else if αυ.contains(a) {
        return("αυ")
    }
    else if ει.contains(a) {
        return("ει")
    }
    else if ῃ.contains(a) {
        return("ῃ")
    }
    else if οι.contains(a) {
        return("οι")
    }
    else if ῳ.contains(a) {
        return("ῳ")
    }
    else if οιου.contains(a) {
        return("οι/ου")
    }
    else if ῳω.contains(a) {
        return("ῳ/ω")
    }
    else if ω.contains(a) {
        return("ω")
    }
    else if ου.contains(a) {
        return("ου")
    }
    else if η.contains(a) {
        return("η")
    }
    else if ᾱ.contains(a) {
        return("ᾱ")
    }
    else if ῑ.contains(a) {
        return("ῑ")
    }
    else if ῡ.contains(a) {
        return("ῡ")
    }
    else {
        return("Error")
    }
}

// Function createHandler. Creates handlers for letter buttons
func createHandler(button: Graphic, word: String) {
    button.setHandler(for: .touch) { _ in 
        button.backgroundColor = #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0)
        button.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
        addWord(word: word)
        if pollabel.text == "Restarted" {
            pollabel.text = "Polynomial"
        }
    }
    button.setHandler(for: .touchUp) { _ in
        button.backgroundColor = #colorLiteral(red: 0.07450980693101883, green: 0.07450980693101883, blue: 0.07450980693101883, alpha: 1.0)
    }
}
createHandler(button: alfabut, word: "α")
createHandler(button: epsilonbut, word: "ε")
createHandler(button: etabut, word: "η")
createHandler(button: omegabut, word: "ω")
createHandler(button: upsilonbut, word: "υ")
createHandler(button: omicronbut, word: "ο")
createHandler(button: alfabuts, word: "ᾳ")
createHandler(button: etabuts, word: "ῃ")
createHandler(button: omegabuts, word: "ῳ")
createHandler(button: clearbut, word: "ι")

// C button's handler
newclearbut.setHandler(for: .touch) { _ in 
    newclearbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    newclearbut.backgroundColor = newclearbut.backgroundColor.darker()
    i.removeAll()
    label.text = "Deleted"
}
newclearbut.setHandler(for: .touchUp) { _ in
    newclearbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// 270 degrees arrow's handler
polclearbut.setHandler(for: .touch) { _ in 
    polclearbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    polclearbut.backgroundColor = polclearbut.backgroundColor.darker()
    if p.count > 1 {
        p.remove(at: p.count-1)
        pollabel.text = p.joined(separator: "")
    }
}
polclearbut.setHandler(for: .touchUp) { _ in
    polclearbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// + button's handler
plusbut.setHandler(for: .touch) { _ in 
    plusbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    plusbut.backgroundColor = plusbut.backgroundColor.darker()
    addWord(word: "+")
    if pollabel.text == "Restarted" {
        pollabel.text = "Polynomial"
    }
}
plusbut.setHandler(for: .touchUp) { _ in
    plusbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// Restart polynomial button's handler
polbut.setHandler(for: .touch) { _ in 
    polbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    polbut.backgroundColor = polbut.backgroundColor.darker()
    p.removeAll()
    pollabel.text = "Restarted"
}
polbut.setHandler(for: .touchUp) { _ in
    polbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// Calculate polynomial button's handler
polbut3.setHandler(for: .touch) { _ in 
    polbut3.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    polbut3.backgroundColor = polbut3.backgroundColor.darker()
    var newone = [Character: Int]()
    if pollabel.text != "Polynomial" && pollabel.text != "Restarted" && Array(pollabel.text)[0] == "(" {
        for i in pollabel.text {
            if i == "(" || i == ")" || i == "+" {
                continue
            }
            if newone[i] == nil {
                newone[i] = 1
                continue
            }
            newone[i] = newone[i]!+1
        }
        pollabel.text = ""
        for (key, value) in newone {
            if pollabel.text == "" { 
                pollabel.text.append((String(value)) + (String(key)))
                continue
            }
            pollabel.text.append("+" + (String(value)) + (String(key)))
            continue
        }
        p.removeAll()
    }
}
polbut3.setHandler(for: .touchUp) { _ in
    polbut3.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// Generate polynomial button's handler
polbut2.setHandler(for: .touch) { _ in 
    polbut2.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    polbut2.backgroundColor = polbut2.backgroundColor.darker()
    pollabel.text = p.joined(separator: "")
}
polbut2.setHandler(for: .touchUp) { _ in
    polbut2.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// Equal button's handler
equalbut.setHandler(for: .touch) { _ in 
    // equalbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
    equalbut.backgroundColor = equalbut.backgroundColor.darker()
    var a = i.joined(separator: "")
    if execute(a: a) == "Error" && a != "" {
        label.text = "Impossible"
        i.removeAll()
    }
    else if a != "" {
        show(word: execute(a: a), word2: a)
    }
    
}
equalbut.setHandler(for: .touchUp) { _ in
    equalbut.backgroundColor = #colorLiteral(red: 0.250980406999588, green: 0.843137264251709, blue: 0.8235294818878174, alpha: 1.0)
}

// Declaring and placing the purple lines
let linex1 = Graphic.line(start: Point(x: -225, y: 120), end: Point(x: 225, y: 120), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let linex2 = Graphic.line(start: Point(x: -225, y: -30), end: Point(x: 225, y: -30), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let linex3 = Graphic.line(start: Point(x: -225, y: -180), end: Point(x: 225, y: -180), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let linex4 = Graphic.line(start: Point(x: -225, y: -330), end: Point(x: 225, y: -330), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let linex5 = Graphic.line(start: Point(x: 175, y: 320), end: Point(x: 225, y: 320), thickness: 5, color: #colorLiteral(red: 0.529411792755127, green: 0.30588236451148987, blue: 0.9960784316062927, alpha: 1.0))
let linex6 = Graphic.line(start: Point(x: -150-150/2, y: -380), end: Point(x: 150+150/2, y: -380), thickness: 5, color: #colorLiteral(red: 0.529411792755127, green: 0.30588236451148987, blue: 0.9960784316062927, alpha: 1.0))
scene.place(linex1)
scene.place(linex2)
scene.place(linex3)
scene.place(linex4)
scene.place(linex5)
scene.place(linex6)

let liney1 = Graphic.line(start: Point(x: 75, y: 270), end: Point(x: 75, y: -330), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let liney2 = Graphic.line(start: Point(x: -75, y: 270), end: Point(x: -75, y: -330), thickness: 5, color: #colorLiteral(red: 0.5279856324, green: 0.3070980608, blue: 0.9949815869, alpha: 1.0))
let liney3 = Graphic.line(start: Point(x: 0, y: -330), end: Point(x: 0, y: -380), thickness: 5, color: #colorLiteral(red: 0.529411792755127, green: 0.30588236451148987, blue: 0.9960784316062927, alpha: 1.0))

scene.place(liney1)
scene.place(liney2)
scene.place(liney3)

